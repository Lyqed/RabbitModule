{
  "version": 4,
  "terraform_version": "1.7.4",
  "serial": 446,
  "lineage": "fd4d4dd6-b248-fe6d-65f0-09d0e6b2882b",
  "outputs": {},
  "resources": [
    {
      "module": "module.ec2-module",
      "mode": "data",
      "type": "template_file",
      "name": "init",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "5d626ce65e62e0e99c282386b83a86b5edd6a59a587b30ed2ab0a7074b46208b",
            "rendered": "#!/bin/bash\r\n#ubuntu fine tuning\r\necho \"fs.file-max = 65535\" \u003e\u003e /etc/sysctl.conf\r\nsysctl -p\r\necho \"\r\n* soft     nproc          65535    \r\n* hard     nproc          65535   \r\n* soft     nofile         65535   \r\n* hard     nofile         65535\r\nroot soft     nproc          65535    \r\nroot hard     nproc          65535   \r\nroot soft     nofile         65535   \r\nroot hard     nofile         65535\r\n\" \u003e\u003e /etc/security/limits.conf\r\necho \"session required pam_limits.so\" \u003e\u003e /etc/pam.d/common-session\r\n\r\nsudo apt-get update -y\r\n\r\n# Docker Installation\r\ncurl -fsSL https://get.docker.com -o get-docker.sh\r\nsudo sh ./get-docker.sh\r\nsudo groupadd docker\r\nsudo gpasswd -a $USER docker\r\nsudo gpasswd -a ubuntu docker\r\nsudo systemctl restart docker\r\n\r\n# AWS Installation to access ECR\r\n#sudo apt install awscli -y\r\n# uncomment the below line incase using ECR\r\n#aws ecr get-login-password --region ap-south-1 | docker login --username AWS --password-stdin \u003caccountID\u003e.dkr.ecr.ap-south-1.amazonaws.com\r\n\r\n#NEW RELIC SETUP\r\n#curl -Ls https://download.newrelic.com/install/newrelic-cli/scripts/install.sh | bash \u0026\u0026 sudo NEW_RELIC_API_KEY=\u003cnew_relic_api_key\u003e NEW_RELIC_ACCOUNT_ID=\u003cnew_relic_account_id\u003e /usr/local/bin/newrelic install\r\n\r\n#Prometheus Node Exporter\r\ndocker run -d   --name node_exporter --restart unless-stopped --net=host   --pid=\"host\"   -v \"/:/host:ro,rslave\"   quay.io/prometheus/node-exporter   --path.rootfs=/\r\n\r\n# Volume Attach\r\nDEVICE_NAME=$(lsblk -no NAME | grep nvme | sed -n 2p)\r\nsudo file -s /dev/$DEVICE_NAME\r\nsudo mkfs -t xfs /dev/$DEVICE_NAME\r\nsudo mkdir /data\r\nsudo mount /dev/$DEVICE_NAME /data\r\nsudo cp /etc/fstab /etc/fstab.bak\r\necho \"/dev/$DEVICE_NAME       /data   xfs    defaults,nofail        0       0\" | sudo tee -a /etc/fstab\r\n\r\n\r\n# Create directory\r\n#sudo mkdir -p /data/rabbitmq/log\r\n#sudo chown lxd:ubuntu /data/rabbitmq/log\r\n\r\nsudo mkdir -p /data/rabbitmq/data\r\nsudo chown lxd:ubuntu /data/rabbitmq/data\r\n\r\nenvironment=\"\u003cenv\u003e\"\r\nregion=\"ap-south-1\"\r\nexport AWS_DEFAULT_REGION=$region\r\ninstance_id=$(curl http://169.254.169.254/latest/meta-data/instance-id)\r\nipV4=$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\r\nuser=\"\"\r\npassword=\"\"\r\nRABBITMQ_ERLANG_COOKIE=XSIOPWZAZEKOKDATHCOX\r\nRABBITMQ_NODENAME=rabbit@\"$ipV4\"\r\n#RABBITMQ_LOGS=/var/log/rabbitmq/$RABBITMQ_NODENAME.log\r\n\r\nsudo mkdir /rabbitmq\r\n\r\n# Rabbitmq Configurations\r\necho \"\r\ncluster_formation.peer_discovery_backend = aws\r\ncluster_formation.aws.region = \"$region\"\r\ncluster_formation.aws.use_autoscaling_group = true\r\ncluster_formation.discovery_retry_limit = 10\r\ncluster_formation.discovery_retry_interval = 10000\r\ncluster_formation.aws.instance_tags.service = rabbitmq\r\ncluster_formation.aws.use_private_ip = true\r\ncluster_name = rabbitmq\r\n#log.file = true\r\n#log.file.formatter = json\r\n#log.file.formatter.time_format = epoch_usecs\r\n#log.dir = /var/log/rabbitmq\r\n#log.file.level = debug\r\nvm_memory_high_watermark.relative = 0.8\r\nprometheus.return_per_object_metrics = true\r\n\" \u003e /rabbitmq/rabbitmq.conf\r\n\r\necho \"\r\nNODENAME=rabbit@\"$ipV4\"\r\nRABBITMQ_NODENAME=rabbit@\"$ipV4\"\r\nNODE_IP_ADDRESS=\"$ipV4\"\r\nUSE_LONGNAME=true\r\nRABBITMQ_USE_LONGNAME=true\r\nRABBITMQ_ERLANG_COOKIE=XSIOPWZAZEKOKDATHCOX\r\n#RABBITMQ_LOGS=/var/log/rabbitmq/$RABBITMQ_NODENAME.log\r\n\" \u003e /rabbitmq/rabbitmq-env.conf\r\n\r\ncat \u003e /rabbitmq/enabled_plugins \u003c\u003c'BOF'\r\n[rabbitmq_management,rabbitmq_peer_discovery_aws,rabbitmq_federation,rabbitmq_prometheus,rabbitmq_shovel_management,rabbitmq_shovel].\r\nBOF\r\n\r\ndocker run -d --restart unless-stopped --name rabbit --network=\"host\" --log-driver=awslogs --log-opt awslogs-region=ap-south-1 --log-opt awslogs-group=rabbitmq_stage_log --log-opt awslogs-create-group=true -v /rabbitmq:/etc/rabbitmq -v /data/rabbitmq/data:/var/lib/rabbitmq --hostname $$HOSTNAME -e RABBITMQ_NODENAME=rabbit@\"$$ipV4\" -e NODE_IP_ADDRESS=\"$$ipV4\" -e RABBITMQ_USE_LONGNAME=true -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_ERLANG_COOKIE=XSIOPWZAZEKOKDATHCOX -e RABBITMQ_DEFAULT_PASS=admin sugandh1611/rabbitmq:3.9\r\n\r\nwhile ! nc -vz 127.0.0.1 5672;do echo \"Waiting for port\" \u0026\u0026 sleep 5;done\r\n\r\n\r\nwhile ! nc -vz 127.0.0.1 5672;do echo \"Waiting for port\" \u0026\u0026 sleep 5;done\r\n\r\nsleep 30\r\ndocker exec -it rabbit bash \u003c\u003c'ZDF'\r\nrabbitmqctl set_policy ha-policy \".\" '{\"ha-params\":2, \"ha-sync-mode\":\"automatic\",\"ha-mode\":\"exactly\",\"queue-master-locator\":\"min-masters\"}' --priority 0 --apply-to all\r\nZDF\r\n",
            "template": "#!/bin/bash\r\n#ubuntu fine tuning\r\necho \"fs.file-max = 65535\" \u003e\u003e /etc/sysctl.conf\r\nsysctl -p\r\necho \"\r\n* soft     nproc          65535    \r\n* hard     nproc          65535   \r\n* soft     nofile         65535   \r\n* hard     nofile         65535\r\nroot soft     nproc          65535    \r\nroot hard     nproc          65535   \r\nroot soft     nofile         65535   \r\nroot hard     nofile         65535\r\n\" \u003e\u003e /etc/security/limits.conf\r\necho \"session required pam_limits.so\" \u003e\u003e /etc/pam.d/common-session\r\n\r\nsudo apt-get update -y\r\n\r\n# Docker Installation\r\ncurl -fsSL https://get.docker.com -o get-docker.sh\r\nsudo sh ./get-docker.sh\r\nsudo groupadd docker\r\nsudo gpasswd -a $USER docker\r\nsudo gpasswd -a ubuntu docker\r\nsudo systemctl restart docker\r\n\r\n# AWS Installation to access ECR\r\n#sudo apt install awscli -y\r\n# uncomment the below line incase using ECR\r\n#aws ecr get-login-password --region ap-south-1 | docker login --username AWS --password-stdin \u003caccountID\u003e.dkr.ecr.ap-south-1.amazonaws.com\r\n\r\n#NEW RELIC SETUP\r\n#curl -Ls https://download.newrelic.com/install/newrelic-cli/scripts/install.sh | bash \u0026\u0026 sudo NEW_RELIC_API_KEY=\u003cnew_relic_api_key\u003e NEW_RELIC_ACCOUNT_ID=\u003cnew_relic_account_id\u003e /usr/local/bin/newrelic install\r\n\r\n#Prometheus Node Exporter\r\ndocker run -d   --name node_exporter --restart unless-stopped --net=host   --pid=\"host\"   -v \"/:/host:ro,rslave\"   quay.io/prometheus/node-exporter   --path.rootfs=/\r\n\r\n# Volume Attach\r\nDEVICE_NAME=$(lsblk -no NAME | grep nvme | sed -n 2p)\r\nsudo file -s /dev/$DEVICE_NAME\r\nsudo mkfs -t xfs /dev/$DEVICE_NAME\r\nsudo mkdir /data\r\nsudo mount /dev/$DEVICE_NAME /data\r\nsudo cp /etc/fstab /etc/fstab.bak\r\necho \"/dev/$DEVICE_NAME       /data   xfs    defaults,nofail        0       0\" | sudo tee -a /etc/fstab\r\n\r\n\r\n# Create directory\r\n#sudo mkdir -p /data/rabbitmq/log\r\n#sudo chown lxd:ubuntu /data/rabbitmq/log\r\n\r\nsudo mkdir -p /data/rabbitmq/data\r\nsudo chown lxd:ubuntu /data/rabbitmq/data\r\n\r\nenvironment=\"\u003cenv\u003e\"\r\nregion=\"ap-south-1\"\r\nexport AWS_DEFAULT_REGION=$region\r\ninstance_id=$(curl http://169.254.169.254/latest/meta-data/instance-id)\r\nipV4=$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\r\nuser=\"\"\r\npassword=\"\"\r\nRABBITMQ_ERLANG_COOKIE=XSIOPWZAZEKOKDATHCOX\r\nRABBITMQ_NODENAME=rabbit@\"$ipV4\"\r\n#RABBITMQ_LOGS=/var/log/rabbitmq/$RABBITMQ_NODENAME.log\r\n\r\nsudo mkdir /rabbitmq\r\n\r\n# Rabbitmq Configurations\r\necho \"\r\ncluster_formation.peer_discovery_backend = aws\r\ncluster_formation.aws.region = \"$region\"\r\ncluster_formation.aws.use_autoscaling_group = true\r\ncluster_formation.discovery_retry_limit = 10\r\ncluster_formation.discovery_retry_interval = 10000\r\ncluster_formation.aws.instance_tags.service = rabbitmq\r\ncluster_formation.aws.use_private_ip = true\r\ncluster_name = rabbitmq\r\n#log.file = true\r\n#log.file.formatter = json\r\n#log.file.formatter.time_format = epoch_usecs\r\n#log.dir = /var/log/rabbitmq\r\n#log.file.level = debug\r\nvm_memory_high_watermark.relative = 0.8\r\nprometheus.return_per_object_metrics = true\r\n\" \u003e /rabbitmq/rabbitmq.conf\r\n\r\necho \"\r\nNODENAME=rabbit@\"$ipV4\"\r\nRABBITMQ_NODENAME=rabbit@\"$ipV4\"\r\nNODE_IP_ADDRESS=\"$ipV4\"\r\nUSE_LONGNAME=true\r\nRABBITMQ_USE_LONGNAME=true\r\nRABBITMQ_ERLANG_COOKIE=XSIOPWZAZEKOKDATHCOX\r\n#RABBITMQ_LOGS=/var/log/rabbitmq/$RABBITMQ_NODENAME.log\r\n\" \u003e /rabbitmq/rabbitmq-env.conf\r\n\r\ncat \u003e /rabbitmq/enabled_plugins \u003c\u003c'BOF'\r\n[rabbitmq_management,rabbitmq_peer_discovery_aws,rabbitmq_federation,rabbitmq_prometheus,rabbitmq_shovel_management,rabbitmq_shovel].\r\nBOF\r\n\r\ndocker run -d --restart unless-stopped --name rabbit --network=\"host\" --log-driver=awslogs --log-opt awslogs-region=ap-south-1 --log-opt awslogs-group=rabbitmq_stage_log --log-opt awslogs-create-group=true -v /rabbitmq:/etc/rabbitmq -v /data/rabbitmq/data:/var/lib/rabbitmq --hostname $$HOSTNAME -e RABBITMQ_NODENAME=rabbit@\"$$ipV4\" -e NODE_IP_ADDRESS=\"$$ipV4\" -e RABBITMQ_USE_LONGNAME=true -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_ERLANG_COOKIE=XSIOPWZAZEKOKDATHCOX -e RABBITMQ_DEFAULT_PASS=admin sugandh1611/rabbitmq:3.9\r\n\r\nwhile ! nc -vz 127.0.0.1 5672;do echo \"Waiting for port\" \u0026\u0026 sleep 5;done\r\n\r\n\r\nwhile ! nc -vz 127.0.0.1 5672;do echo \"Waiting for port\" \u0026\u0026 sleep 5;done\r\n\r\nsleep 30\r\ndocker exec -it rabbit bash \u003c\u003c'ZDF'\r\nrabbitmqctl set_policy ha-policy \".\" '{\"ha-params\":2, \"ha-sync-mode\":\"automatic\",\"ha-mode\":\"exactly\",\"queue-master-locator\":\"min-masters\"}' --priority 0 --apply-to all\r\nZDF\r\n",
            "vars": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_autoscaling_group",
      "name": "example",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:autoscaling:eu-central-1:692324108111:autoScalingGroup:e98bc831-f478-46fc-bd0d-6b9ede7a43ab:autoScalingGroupName/example-asg",
            "availability_zones": [
              "eu-central-1a",
              "eu-central-1c"
            ],
            "capacity_rebalance": false,
            "context": "",
            "default_cooldown": 300,
            "default_instance_warmup": 0,
            "desired_capacity": 2,
            "desired_capacity_type": "",
            "enabled_metrics": null,
            "force_delete": false,
            "force_delete_warm_pool": false,
            "health_check_grace_period": 300,
            "health_check_type": "EC2",
            "id": "example-asg",
            "ignore_failed_scaling_activities": false,
            "initial_lifecycle_hook": [],
            "instance_maintenance_policy": [],
            "instance_refresh": [],
            "launch_configuration": "",
            "launch_template": [
              {
                "id": "lt-093c788d10e9bc48f",
                "name": "example-template",
                "version": "$Latest"
              }
            ],
            "load_balancers": [],
            "max_instance_lifetime": 0,
            "max_size": 3,
            "metrics_granularity": "1Minute",
            "min_elb_capacity": null,
            "min_size": 1,
            "mixed_instances_policy": [],
            "name": "example-asg",
            "name_prefix": "",
            "placement_group": "",
            "predicted_capacity": 0,
            "protect_from_scale_in": false,
            "service_linked_role_arn": "arn:aws:iam::692324108111:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling",
            "suspended_processes": null,
            "tag": [],
            "target_group_arns": [],
            "termination_policies": null,
            "timeouts": null,
            "traffic_source": [],
            "vpc_zone_identifier": [
              "subnet-024bee7d7c80272a9",
              "subnet-02afb2885082aabaf"
            ],
            "wait_for_capacity_timeout": "10m",
            "wait_for_elb_capacity": null,
            "warm_pool": [],
            "warm_pool_size": 0
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjo2MDAwMDAwMDAwMDAsInVwZGF0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.ec2-module.aws_iam_instance_profile.rabbit_instance_profile",
            "module.ec2-module.aws_iam_role.rabbit_role",
            "module.ec2-module.aws_launch_template.example",
            "module.ec2-module.aws_security_group.example_sg",
            "module.ec2-module.data.template_file.init"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_autoscaling_policy",
      "name": "example",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adjustment_type": "ChangeInCapacity",
            "arn": "arn:aws:autoscaling:eu-central-1:692324108111:scalingPolicy:872de0fd-b263-4cc0-ae73-4fb86c7839c0:autoScalingGroupName/example-asg:policyName/example_policy",
            "autoscaling_group_name": "example-asg",
            "cooldown": 300,
            "enabled": true,
            "estimated_instance_warmup": 0,
            "id": "example_policy",
            "metric_aggregation_type": "",
            "min_adjustment_magnitude": 0,
            "name": "example_policy",
            "policy_type": "SimpleScaling",
            "predictive_scaling_configuration": [],
            "scaling_adjustment": 2,
            "step_adjustment": [],
            "target_tracking_configuration": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ec2-module.aws_autoscaling_group.example",
            "module.ec2-module.aws_iam_instance_profile.rabbit_instance_profile",
            "module.ec2-module.aws_iam_role.rabbit_role",
            "module.ec2-module.aws_launch_template.example",
            "module.ec2-module.aws_security_group.example_sg",
            "module.ec2-module.data.template_file.init"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "example_high_cpu",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [
              "arn:aws:autoscaling:eu-central-1:692324108111:scalingPolicy:872de0fd-b263-4cc0-ae73-4fb86c7839c0:autoScalingGroupName/example-asg:policyName/example_policy"
            ],
            "alarm_description": "This metric monitors ec2 cpu usage",
            "alarm_name": "high-cpu-usage",
            "arn": "arn:aws:cloudwatch:eu-central-1:692324108111:alarm:high-cpu-usage",
            "comparison_operator": "GreaterThanOrEqualToThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": null,
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 2,
            "extended_statistic": "",
            "id": "high-cpu-usage",
            "insufficient_data_actions": null,
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": null,
            "period": 120,
            "statistic": "Average",
            "tags": null,
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ec2-module.aws_autoscaling_group.example",
            "module.ec2-module.aws_autoscaling_policy.example",
            "module.ec2-module.aws_iam_instance_profile.rabbit_instance_profile",
            "module.ec2-module.aws_iam_role.rabbit_role",
            "module.ec2-module.aws_launch_template.example",
            "module.ec2-module.aws_security_group.example_sg",
            "module.ec2-module.data.template_file.init"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "example_low_cpu",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [
              "arn:aws:autoscaling:eu-central-1:692324108111:scalingPolicy:872de0fd-b263-4cc0-ae73-4fb86c7839c0:autoScalingGroupName/example-asg:policyName/example_policy"
            ],
            "alarm_description": "This metric monitors ec2 cpu usage",
            "alarm_name": "low-cpu-usage",
            "arn": "arn:aws:cloudwatch:eu-central-1:692324108111:alarm:low-cpu-usage",
            "comparison_operator": "LessThanOrEqualToThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "AutoScalingGroupName": "example-asg"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 2,
            "extended_statistic": "",
            "id": "low-cpu-usage",
            "insufficient_data_actions": null,
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": null,
            "period": 120,
            "statistic": "Average",
            "tags": null,
            "tags_all": {},
            "threshold": 20,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ec2-module.aws_autoscaling_group.example",
            "module.ec2-module.aws_autoscaling_policy.example",
            "module.ec2-module.aws_iam_instance_profile.rabbit_instance_profile",
            "module.ec2-module.aws_iam_role.rabbit_role",
            "module.ec2-module.aws_launch_template.example",
            "module.ec2-module.aws_security_group.example_sg",
            "module.ec2-module.data.template_file.init"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "rabbit_instance_profile",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::692324108111:instance-profile/rabbit_instance_profile",
            "create_date": "2024-03-19T13:15:50Z",
            "id": "rabbit_instance_profile",
            "name": "rabbit_instance_profile",
            "name_prefix": "",
            "path": "/",
            "role": "rabbit_role",
            "tags": null,
            "tags_all": {},
            "unique_id": "AIPA2CMN3Q5H3NGIVZ356"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ec2-module.aws_iam_role.rabbit_role"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "rabbit_asg_logging_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::692324108111:policy/rabbit_asg_logging_policy",
            "description": "",
            "id": "arn:aws:iam::692324108111:policy/rabbit_asg_logging_policy",
            "name": "rabbit_asg_logging_policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:DescribeLogGroups\",\"logs:DescribeLogStreams\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA2CMN3Q5HWVOC2QR6R",
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "rabbit_asg_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::692324108111:policy/rabbit_asg_policy",
            "description": "",
            "id": "arn:aws:iam::692324108111:policy/rabbit_asg_policy",
            "name": "rabbit_asg_policy",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"autoscaling:DescribeAutoScalingInstances\",\"ec2:DescribeInstances\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA2CMN3Q5H4NMF5QFT5",
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "rabbit_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::692324108111:role/rabbit_role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2024-03-19T13:15:49Z",
            "description": "",
            "force_detach_policies": false,
            "id": "rabbit_role",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "rabbit_role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AROA2CMN3Q5HTAG5JLX46"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ec2_container_registry_full_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "rabbit_role-20240319131551436900000002",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryFullAccess",
            "role": "rabbit_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ec2-module.aws_iam_role.rabbit_role"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "rabbit_asg_logging_policy_attach",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "rabbit_role-20240319131551611100000004",
            "policy_arn": "arn:aws:iam::692324108111:policy/rabbit_asg_logging_policy",
            "role": "rabbit_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ec2-module.aws_iam_policy.rabbit_asg_logging_policy",
            "module.ec2-module.aws_iam_role.rabbit_role"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "rabbit_asg_policy_attach",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "rabbit_role-20240319131551428000000001",
            "policy_arn": "arn:aws:iam::692324108111:policy/rabbit_asg_policy",
            "role": "rabbit_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ec2-module.aws_iam_policy.rabbit_asg_policy",
            "module.ec2-module.aws_iam_role.rabbit_role"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ssm_managed_instance_core",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "rabbit_role-20240319131551483700000003",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore",
            "role": "rabbit_role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ec2-module.aws_iam_role.rabbit_role"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_launch_template",
      "name": "example",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:692324108111:launch-template/lt-093c788d10e9bc48f",
            "block_device_mappings": [
              {
                "device_name": "/dev/xvda",
                "ebs": [
                  {
                    "delete_on_termination": "",
                    "encrypted": "",
                    "iops": 0,
                    "kms_key_id": "",
                    "snapshot_id": "",
                    "throughput": 0,
                    "volume_size": 20,
                    "volume_type": ""
                  }
                ],
                "no_device": "",
                "virtual_name": ""
              },
              {
                "device_name": "/dev/xvdb",
                "ebs": [
                  {
                    "delete_on_termination": "",
                    "encrypted": "",
                    "iops": 0,
                    "kms_key_id": "",
                    "snapshot_id": "",
                    "throughput": 0,
                    "volume_size": 30,
                    "volume_type": ""
                  }
                ],
                "no_device": "",
                "virtual_name": ""
              }
            ],
            "capacity_reservation_specification": [],
            "cpu_options": [],
            "credit_specification": [],
            "default_version": 1,
            "description": "",
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_optimized": "",
            "elastic_gpu_specifications": [],
            "elastic_inference_accelerator": [],
            "enclave_options": [],
            "hibernation_options": [],
            "iam_instance_profile": [
              {
                "arn": "",
                "name": "rabbit_instance_profile"
              }
            ],
            "id": "lt-093c788d10e9bc48f",
            "image_id": "ami-04dfd853d88e818e8",
            "instance_initiated_shutdown_behavior": "",
            "instance_market_options": [],
            "instance_requirements": [],
            "instance_type": "t3.medium",
            "kernel_id": "",
            "key_name": "mykey2",
            "latest_version": 1,
            "license_specification": [],
            "maintenance_options": [],
            "metadata_options": [],
            "monitoring": [],
            "name": "example-template",
            "name_prefix": "",
            "network_interfaces": [],
            "placement": [],
            "private_dns_name_options": [],
            "ram_disk_id": "",
            "security_group_names": null,
            "tag_specifications": [
              {
                "resource_type": "instance",
                "tags": {
                  "Name": "Rabbitmq-Cluster",
                  "service": "rabbitmq"
                }
              }
            ],
            "tags": null,
            "tags_all": {},
            "update_default_version": null,
            "user_data": "IyEvYmluL2Jhc2gNCiN1YnVudHUgZmluZSB0dW5pbmcNCmVjaG8gImZzLmZpbGUtbWF4ID0gNjU1MzUiID4+IC9ldGMvc3lzY3RsLmNvbmYNCnN5c2N0bCAtcA0KZWNobyAiDQoqIHNvZnQgICAgIG5wcm9jICAgICAgICAgIDY1NTM1ICAgIA0KKiBoYXJkICAgICBucHJvYyAgICAgICAgICA2NTUzNSAgIA0KKiBzb2Z0ICAgICBub2ZpbGUgICAgICAgICA2NTUzNSAgIA0KKiBoYXJkICAgICBub2ZpbGUgICAgICAgICA2NTUzNQ0Kcm9vdCBzb2Z0ICAgICBucHJvYyAgICAgICAgICA2NTUzNSAgICANCnJvb3QgaGFyZCAgICAgbnByb2MgICAgICAgICAgNjU1MzUgICANCnJvb3Qgc29mdCAgICAgbm9maWxlICAgICAgICAgNjU1MzUgICANCnJvb3QgaGFyZCAgICAgbm9maWxlICAgICAgICAgNjU1MzUNCiIgPj4gL2V0Yy9zZWN1cml0eS9saW1pdHMuY29uZg0KZWNobyAic2Vzc2lvbiByZXF1aXJlZCBwYW1fbGltaXRzLnNvIiA+PiAvZXRjL3BhbS5kL2NvbW1vbi1zZXNzaW9uDQoNCnN1ZG8gYXB0LWdldCB1cGRhdGUgLXkNCg0KIyBEb2NrZXIgSW5zdGFsbGF0aW9uDQpjdXJsIC1mc1NMIGh0dHBzOi8vZ2V0LmRvY2tlci5jb20gLW8gZ2V0LWRvY2tlci5zaA0Kc3VkbyBzaCAuL2dldC1kb2NrZXIuc2gNCnN1ZG8gZ3JvdXBhZGQgZG9ja2VyDQpzdWRvIGdwYXNzd2QgLWEgJFVTRVIgZG9ja2VyDQpzdWRvIGdwYXNzd2QgLWEgdWJ1bnR1IGRvY2tlcg0Kc3VkbyBzeXN0ZW1jdGwgcmVzdGFydCBkb2NrZXINCg0KIyBBV1MgSW5zdGFsbGF0aW9uIHRvIGFjY2VzcyBFQ1INCiNzdWRvIGFwdCBpbnN0YWxsIGF3c2NsaSAteQ0KIyB1bmNvbW1lbnQgdGhlIGJlbG93IGxpbmUgaW5jYXNlIHVzaW5nIEVDUg0KI2F3cyBlY3IgZ2V0LWxvZ2luLXBhc3N3b3JkIC0tcmVnaW9uIGFwLXNvdXRoLTEgfCBkb2NrZXIgbG9naW4gLS11c2VybmFtZSBBV1MgLS1wYXNzd29yZC1zdGRpbiA8YWNjb3VudElEPi5ka3IuZWNyLmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbQ0KDQojTkVXIFJFTElDIFNFVFVQDQojY3VybCAtTHMgaHR0cHM6Ly9kb3dubG9hZC5uZXdyZWxpYy5jb20vaW5zdGFsbC9uZXdyZWxpYy1jbGkvc2NyaXB0cy9pbnN0YWxsLnNoIHwgYmFzaCAmJiBzdWRvIE5FV19SRUxJQ19BUElfS0VZPTxuZXdfcmVsaWNfYXBpX2tleT4gTkVXX1JFTElDX0FDQ09VTlRfSUQ9PG5ld19yZWxpY19hY2NvdW50X2lkPiAvdXNyL2xvY2FsL2Jpbi9uZXdyZWxpYyBpbnN0YWxsDQoNCiNQcm9tZXRoZXVzIE5vZGUgRXhwb3J0ZXINCmRvY2tlciBydW4gLWQgICAtLW5hbWUgbm9kZV9leHBvcnRlciAtLXJlc3RhcnQgdW5sZXNzLXN0b3BwZWQgLS1uZXQ9aG9zdCAgIC0tcGlkPSJob3N0IiAgIC12ICIvOi9ob3N0OnJvLHJzbGF2ZSIgICBxdWF5LmlvL3Byb21ldGhldXMvbm9kZS1leHBvcnRlciAgIC0tcGF0aC5yb290ZnM9Lw0KDQojIFZvbHVtZSBBdHRhY2gNCkRFVklDRV9OQU1FPSQobHNibGsgLW5vIE5BTUUgfCBncmVwIG52bWUgfCBzZWQgLW4gMnApDQpzdWRvIGZpbGUgLXMgL2Rldi8kREVWSUNFX05BTUUNCnN1ZG8gbWtmcyAtdCB4ZnMgL2Rldi8kREVWSUNFX05BTUUNCnN1ZG8gbWtkaXIgL2RhdGENCnN1ZG8gbW91bnQgL2Rldi8kREVWSUNFX05BTUUgL2RhdGENCnN1ZG8gY3AgL2V0Yy9mc3RhYiAvZXRjL2ZzdGFiLmJhaw0KZWNobyAiL2Rldi8kREVWSUNFX05BTUUgICAgICAgL2RhdGEgICB4ZnMgICAgZGVmYXVsdHMsbm9mYWlsICAgICAgICAwICAgICAgIDAiIHwgc3VkbyB0ZWUgLWEgL2V0Yy9mc3RhYg0KDQoNCiMgQ3JlYXRlIGRpcmVjdG9yeQ0KI3N1ZG8gbWtkaXIgLXAgL2RhdGEvcmFiYml0bXEvbG9nDQojc3VkbyBjaG93biBseGQ6dWJ1bnR1IC9kYXRhL3JhYmJpdG1xL2xvZw0KDQpzdWRvIG1rZGlyIC1wIC9kYXRhL3JhYmJpdG1xL2RhdGENCnN1ZG8gY2hvd24gbHhkOnVidW50dSAvZGF0YS9yYWJiaXRtcS9kYXRhDQoNCmVudmlyb25tZW50PSI8ZW52PiINCnJlZ2lvbj0iYXAtc291dGgtMSINCmV4cG9ydCBBV1NfREVGQVVMVF9SRUdJT049JHJlZ2lvbg0KaW5zdGFuY2VfaWQ9JChjdXJsIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9pbnN0YW5jZS1pZCkNCmlwVjQ9JChjdXJsIGh0dHA6Ly8xNjkuMjU0LjE2OS4yNTQvbGF0ZXN0L21ldGEtZGF0YS9sb2NhbC1pcHY0KQ0KdXNlcj0iIg0KcGFzc3dvcmQ9IiINClJBQkJJVE1RX0VSTEFOR19DT09LSUU9WFNJT1BXWkFaRUtPS0RBVEhDT1gNClJBQkJJVE1RX05PREVOQU1FPXJhYmJpdEAiJGlwVjQiDQojUkFCQklUTVFfTE9HUz0vdmFyL2xvZy9yYWJiaXRtcS8kUkFCQklUTVFfTk9ERU5BTUUubG9nDQoNCnN1ZG8gbWtkaXIgL3JhYmJpdG1xDQoNCiMgUmFiYml0bXEgQ29uZmlndXJhdGlvbnMNCmVjaG8gIg0KY2x1c3Rlcl9mb3JtYXRpb24ucGVlcl9kaXNjb3ZlcnlfYmFja2VuZCA9IGF3cw0KY2x1c3Rlcl9mb3JtYXRpb24uYXdzLnJlZ2lvbiA9ICIkcmVnaW9uIg0KY2x1c3Rlcl9mb3JtYXRpb24uYXdzLnVzZV9hdXRvc2NhbGluZ19ncm91cCA9IHRydWUNCmNsdXN0ZXJfZm9ybWF0aW9uLmRpc2NvdmVyeV9yZXRyeV9saW1pdCA9IDEwDQpjbHVzdGVyX2Zvcm1hdGlvbi5kaXNjb3ZlcnlfcmV0cnlfaW50ZXJ2YWwgPSAxMDAwMA0KY2x1c3Rlcl9mb3JtYXRpb24uYXdzLmluc3RhbmNlX3RhZ3Muc2VydmljZSA9IHJhYmJpdG1xDQpjbHVzdGVyX2Zvcm1hdGlvbi5hd3MudXNlX3ByaXZhdGVfaXAgPSB0cnVlDQpjbHVzdGVyX25hbWUgPSByYWJiaXRtcQ0KI2xvZy5maWxlID0gdHJ1ZQ0KI2xvZy5maWxlLmZvcm1hdHRlciA9IGpzb24NCiNsb2cuZmlsZS5mb3JtYXR0ZXIudGltZV9mb3JtYXQgPSBlcG9jaF91c2Vjcw0KI2xvZy5kaXIgPSAvdmFyL2xvZy9yYWJiaXRtcQ0KI2xvZy5maWxlLmxldmVsID0gZGVidWcNCnZtX21lbW9yeV9oaWdoX3dhdGVybWFyay5yZWxhdGl2ZSA9IDAuOA0KcHJvbWV0aGV1cy5yZXR1cm5fcGVyX29iamVjdF9tZXRyaWNzID0gdHJ1ZQ0KIiA+IC9yYWJiaXRtcS9yYWJiaXRtcS5jb25mDQoNCmVjaG8gIg0KTk9ERU5BTUU9cmFiYml0QCIkaXBWNCINClJBQkJJVE1RX05PREVOQU1FPXJhYmJpdEAiJGlwVjQiDQpOT0RFX0lQX0FERFJFU1M9IiRpcFY0Ig0KVVNFX0xPTkdOQU1FPXRydWUNClJBQkJJVE1RX1VTRV9MT05HTkFNRT10cnVlDQpSQUJCSVRNUV9FUkxBTkdfQ09PS0lFPVhTSU9QV1pBWkVLT0tEQVRIQ09YDQojUkFCQklUTVFfTE9HUz0vdmFyL2xvZy9yYWJiaXRtcS8kUkFCQklUTVFfTk9ERU5BTUUubG9nDQoiID4gL3JhYmJpdG1xL3JhYmJpdG1xLWVudi5jb25mDQoNCmNhdCA+IC9yYWJiaXRtcS9lbmFibGVkX3BsdWdpbnMgPDwnQk9GJw0KW3JhYmJpdG1xX21hbmFnZW1lbnQscmFiYml0bXFfcGVlcl9kaXNjb3ZlcnlfYXdzLHJhYmJpdG1xX2ZlZGVyYXRpb24scmFiYml0bXFfcHJvbWV0aGV1cyxyYWJiaXRtcV9zaG92ZWxfbWFuYWdlbWVudCxyYWJiaXRtcV9zaG92ZWxdLg0KQk9GDQoNCmRvY2tlciBydW4gLWQgLS1yZXN0YXJ0IHVubGVzcy1zdG9wcGVkIC0tbmFtZSByYWJiaXQgLS1uZXR3b3JrPSJob3N0IiAtLWxvZy1kcml2ZXI9YXdzbG9ncyAtLWxvZy1vcHQgYXdzbG9ncy1yZWdpb249YXAtc291dGgtMSAtLWxvZy1vcHQgYXdzbG9ncy1ncm91cD1yYWJiaXRtcV9zdGFnZV9sb2cgLS1sb2ctb3B0IGF3c2xvZ3MtY3JlYXRlLWdyb3VwPXRydWUgLXYgL3JhYmJpdG1xOi9ldGMvcmFiYml0bXEgLXYgL2RhdGEvcmFiYml0bXEvZGF0YTovdmFyL2xpYi9yYWJiaXRtcSAtLWhvc3RuYW1lICQkSE9TVE5BTUUgLWUgUkFCQklUTVFfTk9ERU5BTUU9cmFiYml0QCIkJGlwVjQiIC1lIE5PREVfSVBfQUREUkVTUz0iJCRpcFY0IiAtZSBSQUJCSVRNUV9VU0VfTE9OR05BTUU9dHJ1ZSAtZSBSQUJCSVRNUV9ERUZBVUxUX1VTRVI9YWRtaW4gLWUgUkFCQklUTVFfRVJMQU5HX0NPT0tJRT1YU0lPUFdaQVpFS09LREFUSENPWCAtZSBSQUJCSVRNUV9ERUZBVUxUX1BBU1M9YWRtaW4gc3VnYW5kaDE2MTEvcmFiYml0bXE6My45DQoNCndoaWxlICEgbmMgLXZ6IDEyNy4wLjAuMSA1NjcyO2RvIGVjaG8gIldhaXRpbmcgZm9yIHBvcnQiICYmIHNsZWVwIDU7ZG9uZQ0KDQoNCndoaWxlICEgbmMgLXZ6IDEyNy4wLjAuMSA1NjcyO2RvIGVjaG8gIldhaXRpbmcgZm9yIHBvcnQiICYmIHNsZWVwIDU7ZG9uZQ0KDQpzbGVlcCAzMA0KZG9ja2VyIGV4ZWMgLWl0IHJhYmJpdCBiYXNoIDw8J1pERicNCnJhYmJpdG1xY3RsIHNldF9wb2xpY3kgaGEtcG9saWN5ICIuIiAneyJoYS1wYXJhbXMiOjIsICJoYS1zeW5jLW1vZGUiOiJhdXRvbWF0aWMiLCJoYS1tb2RlIjoiZXhhY3RseSIsInF1ZXVlLW1hc3Rlci1sb2NhdG9yIjoibWluLW1hc3RlcnMifScgLS1wcmlvcml0eSAwIC0tYXBwbHktdG8gYWxsDQpaREYNCg==",
            "vpc_security_group_ids": [
              "sg-04b637de367700a33"
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.ec2-module.aws_iam_instance_profile.rabbit_instance_profile",
            "module.ec2-module.aws_iam_role.rabbit_role",
            "module.ec2-module.aws_security_group.example_sg",
            "module.ec2-module.data.template_file.init"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_lb",
      "name": "name",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:loadbalancer/app/example-lb/15fcf80c860b2586",
            "arn_suffix": "app/example-lb/15fcf80c860b2586",
            "connection_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "customer_owned_ipv4_pool": "",
            "desync_mitigation_mode": "defensive",
            "dns_name": "example-lb-765566203.eu-central-1.elb.amazonaws.com",
            "dns_record_client_routing_policy": null,
            "drop_invalid_header_fields": false,
            "enable_cross_zone_load_balancing": true,
            "enable_deletion_protection": false,
            "enable_http2": true,
            "enable_tls_version_and_cipher_suite_headers": false,
            "enable_waf_fail_open": false,
            "enable_xff_client_port": false,
            "enforce_security_group_inbound_rules_on_private_link_traffic": "",
            "id": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:loadbalancer/app/example-lb/15fcf80c860b2586",
            "idle_timeout": 60,
            "internal": false,
            "ip_address_type": "ipv4",
            "load_balancer_type": "application",
            "name": "example-lb",
            "name_prefix": "",
            "preserve_host_header": false,
            "security_groups": [
              "sg-04b637de367700a33"
            ],
            "subnet_mapping": [
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-024bee7d7c80272a9"
              },
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-02afb2885082aabaf"
              }
            ],
            "subnets": [
              "subnet-024bee7d7c80272a9",
              "subnet-02afb2885082aabaf"
            ],
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-02249be70919abaa2",
            "xff_header_processing_mode": "append",
            "zone_id": "Z215JYRZR1TBD5"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_lb",
      "name": "rabbitmq_internal_nlb",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:loadbalancer/net/rabbitmq-internal-nlb/9ac0999e3dcb213b",
            "arn_suffix": "net/rabbitmq-internal-nlb/9ac0999e3dcb213b",
            "connection_logs": [],
            "customer_owned_ipv4_pool": "",
            "desync_mitigation_mode": null,
            "dns_name": "rabbitmq-internal-nlb-9ac0999e3dcb213b.elb.eu-central-1.amazonaws.com",
            "dns_record_client_routing_policy": "any_availability_zone",
            "drop_invalid_header_fields": null,
            "enable_cross_zone_load_balancing": true,
            "enable_deletion_protection": false,
            "enable_http2": null,
            "enable_tls_version_and_cipher_suite_headers": null,
            "enable_waf_fail_open": null,
            "enable_xff_client_port": null,
            "enforce_security_group_inbound_rules_on_private_link_traffic": "",
            "id": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:loadbalancer/net/rabbitmq-internal-nlb/9ac0999e3dcb213b",
            "idle_timeout": null,
            "internal": false,
            "ip_address_type": "ipv4",
            "load_balancer_type": "network",
            "name": "rabbitmq-internal-nlb",
            "name_prefix": "",
            "preserve_host_header": null,
            "security_groups": [
              "sg-04b637de367700a33"
            ],
            "subnet_mapping": [
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-024bee7d7c80272a9"
              },
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-02afb2885082aabaf"
              }
            ],
            "subnets": [
              "subnet-024bee7d7c80272a9",
              "subnet-02afb2885082aabaf"
            ],
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-02249be70919abaa2",
            "xff_header_processing_mode": null,
            "zone_id": "Z3F0SRJ5LGBH90"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "nlb_listener",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "alpn_policy": null,
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:listener/net/rabbitmq-internal-nlb/9ac0999e3dcb213b/ffbb334b9a886c90",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:targetgroup/rabbitmq-nlb-tg/618f5b30f68486f3",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:listener/net/rabbitmq-internal-nlb/9ac0999e3dcb213b/ffbb334b9a886c90",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:loadbalancer/net/rabbitmq-internal-nlb/9ac0999e3dcb213b",
            "mutual_authentication": [],
            "port": 5672,
            "protocol": "TCP",
            "ssl_policy": "",
            "tags": null,
            "tags_all": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsInVwZGF0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.ec2-module.aws_lb.rabbitmq_internal_nlb",
            "module.ec2-module.aws_lb_target_group.rabbitmq_nlb_tg",
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "rabbitmq_nlb_tg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:targetgroup/rabbitmq-nlb-tg/618f5b30f68486f3",
            "arn_suffix": "targetgroup/rabbitmq-nlb-tg/618f5b30f68486f3",
            "connection_termination": false,
            "deregistration_delay": "300",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 3,
                "interval": 30,
                "matcher": "",
                "path": "",
                "port": "traffic-port",
                "protocol": "TCP",
                "timeout": 10,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:targetgroup/rabbitmq-nlb-tg/618f5b30f68486f3",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [],
            "load_balancing_algorithm_type": null,
            "load_balancing_anomaly_mitigation": null,
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "rabbitmq-nlb-tg",
            "name_prefix": "",
            "port": 5672,
            "preserve_client_ip": "true",
            "protocol": "TCP",
            "protocol_version": null,
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 0,
                "cookie_name": "",
                "enabled": false,
                "type": "source_ip"
              }
            ],
            "tags": null,
            "tags_all": {},
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": true
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-02249be70919abaa2"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "rabbitmq_tg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:targetgroup/rabbitmq-tg/2073fcc6b1765945",
            "arn_suffix": "targetgroup/rabbitmq-tg/2073fcc6b1765945",
            "connection_termination": null,
            "deregistration_delay": "300",
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 3,
                "interval": 30,
                "matcher": "200",
                "path": "/",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 3
              }
            ],
            "id": "arn:aws:elasticloadbalancing:eu-central-1:692324108111:targetgroup/rabbitmq-tg/2073fcc6b1765945",
            "ip_address_type": "ipv4",
            "lambda_multi_value_headers_enabled": false,
            "load_balancer_arns": [],
            "load_balancing_algorithm_type": "round_robin",
            "load_balancing_anomaly_mitigation": "off",
            "load_balancing_cross_zone_enabled": "use_load_balancer_configuration",
            "name": "rabbitmq-tg",
            "name_prefix": "",
            "port": 15672,
            "preserve_client_ip": null,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "cookie_name": "",
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": null,
            "tags_all": {},
            "target_failover": [
              {
                "on_deregistration": null,
                "on_unhealthy": null
              }
            ],
            "target_health_state": [
              {
                "enable_unhealthy_connection_termination": null
              }
            ],
            "target_type": "instance",
            "vpc_id": "vpc-02249be70919abaa2"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "example_sg",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:692324108111:security-group/sg-04b637de367700a33",
            "description": "Example Security Group",
            "egress": [],
            "id": "sg-04b637de367700a33",
            "ingress": [],
            "name": "example-sg",
            "name_prefix": "",
            "owner_id": "692324108111",
            "revoke_rules_on_delete": false,
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "vpc_id": "vpc-02249be70919abaa2"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "egress_all",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": null,
            "from_port": 0,
            "id": "sgrule-1508242474",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "-1",
            "security_group_id": "sg-04b637de367700a33",
            "security_group_rule_id": "sgr-0a365b842f1eabcab",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 0,
            "type": "egress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": null,
            "from_port": 80,
            "id": "sgrule-1892549604",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-04b637de367700a33",
            "security_group_rule_id": "sgr-099e9890199e44c7d",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 80,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "https",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": null,
            "from_port": 443,
            "id": "sgrule-87586158",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-04b637de367700a33",
            "security_group_rule_id": "sgr-0e7f3b54a03aa879e",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 443,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "rule1",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": null,
            "from_port": 35197,
            "id": "sgrule-2892021625",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-04b637de367700a33",
            "security_group_rule_id": "sgr-09cb6baa0e673987f",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 35197,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "rule15",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": null,
            "from_port": 15672,
            "id": "sgrule-3039220147",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-04b637de367700a33",
            "security_group_rule_id": "sgr-01b64a3ac89eeebdd",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 15672,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "rule18",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": null,
            "from_port": 4369,
            "id": "sgrule-858728027",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-04b637de367700a33",
            "security_group_rule_id": "sgr-01f2afe058ac127cc",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 4369,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "rule2",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": null,
            "from_port": 5672,
            "id": "sgrule-1285819186",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-04b637de367700a33",
            "security_group_rule_id": "sgr-007826564b612cc0b",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 5672,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    },
    {
      "module": "module.ec2-module",
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "ssh",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": [
              "0.0.0.0/0"
            ],
            "description": null,
            "from_port": 22,
            "id": "sgrule-3326369361",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-04b637de367700a33",
            "security_group_rule_id": "sgr-02231561cc4f7f919",
            "self": false,
            "source_security_group_id": null,
            "timeouts": null,
            "to_port": 22,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "module.ec2-module.aws_security_group.example_sg"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
